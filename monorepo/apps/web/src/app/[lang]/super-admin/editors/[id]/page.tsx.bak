'use client';

import { useEffect, useState, useCallback } from 'react';
import { useRouter } from 'next/navigation';
import { DashboardLayout, StatsCard } from '@/components/admin';
import { useStaffAuth } from '@/contexts/StaffAuthContext';
import { apiClient } from '@/lib/api';

interface EditorActivity {
  id: number;
  type: 'login' | 'logout' | 'ad_approved' | 'ad_rejected' | 'ad_edited' | 'ad_deleted' | 'business_approved' | 'business_rejected' | 'individual_approved' | 'individual_rejected';
  timestamp: string;
  details?: string;
  relatedId?: number;
}

interface AdWork {
  id: number;
  adTitle: string;
  action: 'approved' | 'rejected' | 'edited' | 'deleted';
  timestamp: string;
  reason?: string;
}

interface VerificationWork {
  id: number;
  sellerName: string;
  action: 'approved' | 'rejected';
  timestamp: string;
  reason?: string;
}

interface EditorDetail {
  id: number;
  fullName: string;
  email: string;
  avatar: string | null;
  status: 'active' | 'suspended';
  createdAt: string;
  lastLogin: string | null;
  stats: {
    adsApproved: number;
    adsRejected: number;
    adsEdited: number;
    adsDeleted: number;
    businessApproved: number;
    businessRejected: number;
    individualApproved: number;
    individualRejected: number;
  };
  activities: EditorActivity[];
  adWork: AdWork[];
  businessVerifications: VerificationWork[];
  individualVerifications: VerificationWork[];
}

export default function EditorDetailPage({ params }: { params: { lang: string; id: string } }) {
  const router = useRouter();
  const { staff, isLoading: authLoading, isSuperAdmin, logout } = useStaffAuth();

  // Extract params early to avoid Next.js 15 re-render issues
  const lang = params.lang;
  const editorId = parseInt(params.id);

  const [editor, setEditor] = useState<EditorDetail | null>(null);
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState<'activity' | 'ads' | 'business' | 'individual'>('activity');
  const [showSuspendModal, setShowSuspendModal] = useState(false);
  const [showDeleteModal, setShowDeleteModal] = useState(false);

  const handleLogout = useCallback(async () => {
    await logout();
    router.push(`/${lang}/super-admin/login`);
  }, [logout, router, lang]);

  const loadEditorData = useCallback(async () => {
    try {
      setLoading(true);

      // Fetch all editors to find this specific one
      const editorsResponse = await apiClient.getEditors();
      if (!editorsResponse.success || !editorsResponse.data) {
        throw new Error('Failed to fetch editors');
      }

      const editorInfo = editorsResponse.data.find((e) => e.id === editorId);
      if (!editorInfo) {
        setEditor(null);
        setLoading(false);
        return;
      }

      // Fetch activity logs for this editor
      const activityLogsResponse = await apiClient.getEditorActivityLogs({
        adminId: editorId,
        limit: 100, // Get last 100 activities
      });

      if (!activityLogsResponse.success || !activityLogsResponse.data) {
        throw new Error('Failed to fetch activity logs');
      }

      const activityLogs = activityLogsResponse.data.data || [];

      // Calculate statistics from activity logs
      const stats = {
        adsApproved: activityLogs.filter((log) => log.action_type === 'ad_approved').length,
        adsRejected: activityLogs.filter((log) => log.action_type === 'ad_rejected').length,
        adsEdited: activityLogs.filter((log) => log.action_type === 'ad_edited').length,
        adsDeleted: activityLogs.filter((log) => log.action_type === 'ad_deleted').length,
        businessApproved: activityLogs.filter((log) => log.action_type === 'business_approved').length,
        businessRejected: activityLogs.filter((log) => log.action_type === 'business_rejected').length,
        individualApproved: activityLogs.filter((log) => log.action_type === 'individual_approved').length,
        individualRejected: activityLogs.filter((log) => log.action_type === 'individual_rejected').length,
      };

      // Map activity logs to EditorActivity format
      const activities: EditorActivity[] = activityLogs.map((log) => ({
        id: log.id,
        type: log.action_type as EditorActivity['type'],
        timestamp: log.created_at,
        details: log.details?.description || log.details?.reason || (log.details?.ad_title ? `Ad: ${log.details.ad_title}` : undefined),
        relatedId: log.target_id,
      }));

      // Extract ad work from activity logs
      const adWork: AdWork[] = activityLogs
        .filter((log) => ['ad_approved', 'ad_rejected', 'ad_edited', 'ad_deleted'].includes(log.action_type))
        .map((log) => ({
          id: log.target_id,
          adTitle: log.details?.ad_title || `Ad #${log.target_id}`,
          action: log.action_type.replace('ad_', '') as AdWork['action'],
          timestamp: log.created_at,
          reason: log.details?.reason || log.details?.description,
        }));

      // Extract business verifications from activity logs
      const businessVerifications: VerificationWork[] = activityLogs
        .filter((log) => ['business_approved', 'business_rejected'].includes(log.action_type))
        .map((log) => ({
          id: log.target_id,
          sellerName: log.details?.business_name || log.details?.seller_name || `Business #${log.target_id}`,
          action: log.action_type.replace('business_', '') as VerificationWork['action'],
          timestamp: log.created_at,
          reason: log.details?.reason,
        }));

      // Extract individual verifications from activity logs
      const individualVerifications: VerificationWork[] = activityLogs
        .filter((log) => ['individual_approved', 'individual_rejected'].includes(log.action_type))
        .map((log) => ({
          id: log.target_id,
          sellerName: log.details?.individual_name || log.details?.seller_name || `Individual #${log.target_id}`,
          action: log.action_type.replace('individual_', '') as VerificationWork['action'],
          timestamp: log.created_at,
          reason: log.details?.reason,
        }));

      const editorDetail: EditorDetail = {
        id: editorInfo.id,
        fullName: editorInfo.full_name,
        email: editorInfo.email,
        avatar: editorInfo.avatar,
        status: editorInfo.is_active ? 'active' : 'suspended',
        createdAt: editorInfo.created_at,
        lastLogin: editorInfo.last_login || null,
        stats,
        activities,
        adWork,
        businessVerifications,
        individualVerifications,
      };

      setEditor(editorDetail);
      setLoading(false);
    } catch (error) {
      console.error('Error loading editor data:', error);
      setEditor(null);
      setLoading(false);
    }
  }, [editorId]);

  useEffect(() => {
    if (authLoading) return;

    if (!staff || !isSuperAdmin) {
      router.push(`/${lang}/super-admin/login`);
      return;
    }

    loadEditorData();
  }, [authLoading, staff, isSuperAdmin, lang, router, loadEditorData]);

  const navSections = [
    {
      title: 'Main',
      items: [
        {
          href: `/${lang}/super-admin/dashboard`,
          icon: 'üìä',
          label: 'Dashboard',
        },
      ],
    },
    {
      title: 'Management',
      items: [
        {
          href: `/${lang}/super-admin/ads`,
          icon: 'üì¢',
          label: 'Ad Management',
          badge: 23,
        },
        {
          href: `/${lang}/super-admin/users`,
          icon: 'üë•',
        },
        {
          href: `/${lang}/super-admin/editors`,
          icon: 'üë®‚Äçüíº',
          label: 'Editor Management',
          badge: 5,
        },
        {
          href: `/${lang}/super-admin/financial`,
          icon: 'üí∏',
          label: 'Financial Tracking',
        },
      ],
    },
    {
      title: 'Verification',
      items: [
        {
          href: `/${lang}/super-admin/verifications`,
          icon: '‚úì',
          label: 'Verifications',
          badge: 15,
        },
      ],
    },
    {
      title: 'Business',
      items: [
        {
          href: `/${lang}/super-admin/promotion-pricing`,
          icon: '‚≠ê',
          label: 'Promotion Pricing',
        },
        {
          href: `/${lang}/super-admin/analytics`,
          icon: 'üìà',
          label: 'Analytics & Reports',
        },
      ],
    },
    {
      title: 'System',
      items: [
        {
          href: `/${lang}/super-admin/system-health`,
          icon: 'üñ•Ô∏è',
          label: 'System Health',
        },
        {
          href: `/${lang}/super-admin/security`,
          icon: 'üõ°Ô∏è',
          label: 'Security & Audit',
        },
        {
          href: `/${lang}/super-admin/categories`,
          icon: 'üè∑Ô∏è',
          label: 'Categories',
        },
        {
          href: `/${lang}/super-admin/locations`,
          icon: 'üìç',
          label: 'Locations',
        },
        {
          href: `/${lang}/super-admin/settings`,
          icon: '‚öôÔ∏è',
          label: 'Settings',
        },
      ],
    },
  ];

  const handleSuspend = () => {
    // TODO: Implement actual suspend functionality
    console.log('Suspending editor:', editor?.id);
    setShowSuspendModal(false);
  };

  const handleDelete = () => {
    // TODO: Implement actual delete functionality
    console.log('Deleting editor:', editor?.id);
    setShowDeleteModal(false);
    router.push(`/${lang}/super-admin/editors`);
  };

  const getActivityIcon = (type: EditorActivity['type']) => {
    const icons = {
      login: 'üîì',
      logout: 'üîí',
      ad_approved: '‚úÖ',
      ad_rejected: '‚ùå',
      ad_edited: '‚úèÔ∏è',
      ad_deleted: 'üóëÔ∏è',
      business_approved: '‚úì',
      business_rejected: '‚úó',
      individual_approved: '‚úì',
      individual_rejected: '‚úó',
    };
    return icons[type];
  };

  const getActivityColor = (type: EditorActivity['type']) => {
    if (type.includes('approved')) return 'text-emerald-600 bg-emerald-50';
    if (type.includes('rejected') || type.includes('deleted')) return 'text-rose-600 bg-rose-50';
    if (type.includes('edited')) return 'text-amber-600 bg-amber-50';
    if (type === 'login') return 'text-blue-600 bg-blue-50';
    if (type === 'logout') return 'text-gray-600 bg-gray-50';
    return 'text-gray-600 bg-gray-50';
  };

  const getActivityLabel = (activity: EditorActivity) => {
    const labels: Record<EditorActivity['type'], string> = {
      login: 'Logged In',
      logout: 'Logged Out',
      ad_approved: 'Ad Approved',
      ad_rejected: 'Ad Rejected',
      ad_edited: 'Ad Edited',
      ad_deleted: 'Ad Deleted',
      business_approved: 'Business Approved',
      business_rejected: 'Business Rejected',
      individual_approved: 'Individual Approved',
      individual_rejected: 'Individual Rejected',
    };
    return labels[activity.type];
  };

  const formatTimestamp = (timestamp: string) => {
    const date = new Date(timestamp);
    return date.toLocaleString('en-US', {
      month: 'short',
      day: 'numeric',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
    });
  };

  if (authLoading || loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50">
        <div className="text-center">
          <div className="relative">
            <div className="w-20 h-20 mx-auto mb-6">
              <div className="absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full animate-ping opacity-20" />
              <div className="relative w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center shadow-lg">
                <span className="text-4xl text-white">‚è≥</span>
              </div>
            </div>
            <div className="text-lg font-semibold text-gray-700">Loading editor details...</div>
          </div>
        </div>
      </div>
    );
  }

  if (!editor) {
    return (
      <DashboardLayout
        lang={lang}
        userName={staff?.fullName || 'Admin User'}
        userEmail={staff?.email || 'admin@thulobazaar.com'}
        navSections={navSections}
        theme="superadmin"
        onLogout={handleLogout}
      >
        <div className="text-center py-12">
          <div className="text-6xl mb-4">üòî</div>
          <h2 className="text-2xl font-bold text-gray-900 mb-2">Editor Not Found</h2>
          <p className="text-gray-600 mb-6">The editor you're looking for doesn't exist.</p>
          <button
            onClick={() => router.push(`/${lang}/super-admin/editors`)}
            className="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all"
          >
            Back to Editors
          </button>
        </div>
      </DashboardLayout>
    );
  }

  return (
    <DashboardLayout
      lang={lang}
      userName={staff?.fullName || 'Admin User'}
      userEmail={staff?.email || 'admin@thulobazaar.com'}
      navSections={navSections}
      theme="superadmin"
      onLogout={handleLogout}
    >
      {/* Back Button */}
      <div className="mb-6">
        <button
          onClick={() => router.push(`/${lang}/super-admin/editors`)}
          className="flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-semibold transition-colors"
        >
          <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
          </svg>
          Back to Editors
        </button>
      </div>

      {/* Editor Profile Header */}
      <div className="bg-white rounded-2xl shadow-md border-2 border-gray-100 p-8 mb-8">
        <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
          <div className="flex items-center gap-6">
            {/* Avatar */}
            <div className="w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center border-4 border-indigo-200 shadow-lg">
              {editor.avatar ? (
                <img
                  src={`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000'}/uploads/avatars/${editor.avatar}`}
                  alt={editor.fullName}
                  className="w-full h-full object-cover rounded-xl"
                />
              ) : (
                <span className="text-4xl text-indigo-600 font-bold">{editor.fullName.charAt(0)}</span>
              )}
            </div>

            {/* Info */}
            <div>
              <div className="flex items-center gap-3 mb-2">
                <h1 className="text-3xl font-bold text-gray-900">{editor.fullName}</h1>
                <span
                  className={`px-3 py-1 rounded-full text-sm font-semibold ${
                    editor.status === 'active'
                      ? 'bg-emerald-100 text-emerald-700'
                      : 'bg-rose-100 text-rose-700'
                  }`}
                >
                  {editor.status === 'active' ? '‚úì Active' : '‚è∏ Suspended'}
                </span>
              </div>
              <p className="text-gray-600 text-lg mb-1">{editor.email}</p>
              <div className="flex items-center gap-4 text-sm text-gray-500">
                <span>Joined: {formatTimestamp(editor.createdAt)}</span>
                {editor.lastLogin && (
                  <>
                    <span>‚Ä¢</span>
                    <span>Last login: {formatTimestamp(editor.lastLogin)}</span>
                  </>
                )}
              </div>
            </div>
          </div>

          {/* Actions */}
          <div className="flex gap-3">
            <button
              onClick={() => setShowSuspendModal(true)}
              className={`px-5 py-2.5 border-2 font-semibold rounded-xl transition-all ${
                editor.status === 'active'
                  ? 'border-amber-300 text-amber-700 hover:bg-amber-50'
                  : 'border-emerald-300 text-emerald-700 hover:bg-emerald-50'
              }`}
            >
              {editor.status === 'active' ? '‚è∏ Suspend' : '‚ñ∂Ô∏è Activate'}
            </button>
            <button
              onClick={() => setShowDeleteModal(true)}
              className="px-5 py-2.5 border-2 border-rose-300 text-rose-700 font-semibold rounded-xl hover:bg-rose-50 transition-all"
            >
              üóëÔ∏è Delete
            </button>
          </div>
        </div>
      </div>

      {/* Stats Grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <StatsCard
          title="Ads Approved"
          value={editor.stats.adsApproved}
          icon="‚úÖ"
          color="success"
          theme="superadmin"
        />
        <StatsCard
          title="Ads Rejected"
          value={editor.stats.adsRejected}
          icon="‚ùå"
          color="danger"
          theme="superadmin"
        />
        <StatsCard
          title="Business Verified"
          value={editor.stats.businessApproved}
          icon="üè¢"
          color="primary"
          theme="superadmin"
        />
        <StatsCard
          title="Individual Verified"
          value={editor.stats.individualApproved}
          icon="üë§"
          color="primary"
          theme="superadmin"
        />
      </div>

      {/* Tabs */}
      <div className="bg-white rounded-2xl shadow-md border-2 border-gray-100 overflow-hidden">
        {/* Tab Headers */}
        <div className="border-b-2 border-gray-100 bg-gray-50 px-6">
          <div className="flex gap-2 overflow-x-auto">
            {[
              { key: 'activity', label: 'Activity Timeline', icon: 'üìÖ' },
              { key: 'ads', label: 'Ads Work', icon: 'üì¢', badge: editor.adWork.length },
              { key: 'business', label: 'Business Verifications', icon: 'üè¢', badge: editor.businessVerifications.length },
              { key: 'individual', label: 'Individual Verifications', icon: 'üë§', badge: editor.individualVerifications.length },
            ].map((tab) => (
              <button
                key={tab.key}
                onClick={() => setActiveTab(tab.key as any)}
                className={`relative px-6 py-4 font-semibold transition-all whitespace-nowrap ${
                  activeTab === tab.key
                    ? 'text-indigo-600'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                <span className="flex items-center gap-2">
                  <span>{tab.icon}</span>
                  <span>{tab.label}</span>
                  {tab.badge !== undefined && (
                    <span className="ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full font-bold">
                      {tab.badge}
                    </span>
                  )}
                </span>
                {activeTab === tab.key && (
                  <div className="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-t-full" />
                )}
              </button>
            ))}
          </div>
        </div>

        {/* Tab Content */}
        <div className="p-6">
          {/* Activity Timeline Tab */}
          {activeTab === 'activity' && (
            <div className="space-y-4">
              {editor.activities.map((activity) => (
                <div
                  key={activity.id}
                  className="flex items-start gap-4 p-4 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors"
                >
                  <div className={`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${getActivityColor(activity.type)}`}>
                    <span className="text-2xl">{getActivityIcon(activity.type)}</span>
                  </div>
                  <div className="flex-1">
                    <div className="flex items-start justify-between gap-4">
                      <div>
                        <h4 className="font-semibold text-gray-900 mb-1">{getActivityLabel(activity)}</h4>
                        {activity.details && <p className="text-gray-600 text-sm">{activity.details}</p>}
                      </div>
                      <span className="text-sm text-gray-500 whitespace-nowrap">{formatTimestamp(activity.timestamp)}</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}

          {/* Ads Work Tab */}
          {activeTab === 'ads' && (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b-2 border-gray-100">
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Ad ID</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Ad Title</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Action</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Timestamp</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Reason/Notes</th>
                  </tr>
                </thead>
                <tbody>
                  {editor.adWork.map((ad) => (
                    <tr key={ad.id} className="border-b border-gray-100 hover:bg-gray-50">
                      <td className="py-4 px-4 text-gray-600">#{ad.id}</td>
                      <td className="py-4 px-4 font-medium text-gray-900">{ad.adTitle}</td>
                      <td className="py-4 px-4">
                        <span
                          className={`px-3 py-1 rounded-full text-xs font-semibold ${
                            ad.action === 'approved'
                              ? 'bg-emerald-100 text-emerald-700'
                              : ad.action === 'rejected'
                              ? 'bg-rose-100 text-rose-700'
                              : ad.action === 'edited'
                              ? 'bg-amber-100 text-amber-700'
                              : 'bg-gray-100 text-gray-700'
                          }`}
                        >
                          {ad.action.charAt(0).toUpperCase() + ad.action.slice(1)}
                        </span>
                      </td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{formatTimestamp(ad.timestamp)}</td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{ad.reason || '-'}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* Business Verifications Tab */}
          {activeTab === 'business' && (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b-2 border-gray-100">
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">ID</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Seller Name</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Action</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Timestamp</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Reason/Notes</th>
                  </tr>
                </thead>
                <tbody>
                  {editor.businessVerifications.map((verification) => (
                    <tr key={verification.id} className="border-b border-gray-100 hover:bg-gray-50">
                      <td className="py-4 px-4 text-gray-600">#{verification.id}</td>
                      <td className="py-4 px-4 font-medium text-gray-900">{verification.sellerName}</td>
                      <td className="py-4 px-4">
                        <span
                          className={`px-3 py-1 rounded-full text-xs font-semibold ${
                            verification.action === 'approved'
                              ? 'bg-emerald-100 text-emerald-700'
                              : 'bg-rose-100 text-rose-700'
                          }`}
                        >
                          {verification.action.charAt(0).toUpperCase() + verification.action.slice(1)}
                        </span>
                      </td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{formatTimestamp(verification.timestamp)}</td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{verification.reason || '-'}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* Individual Verifications Tab */}
          {activeTab === 'individual' && (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b-2 border-gray-100">
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">ID</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Seller Name</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Action</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Timestamp</th>
                    <th className="text-left py-4 px-4 font-semibold text-gray-700">Reason/Notes</th>
                  </tr>
                </thead>
                <tbody>
                  {editor.individualVerifications.map((verification) => (
                    <tr key={verification.id} className="border-b border-gray-100 hover:bg-gray-50">
                      <td className="py-4 px-4 text-gray-600">#{verification.id}</td>
                      <td className="py-4 px-4 font-medium text-gray-900">{verification.sellerName}</td>
                      <td className="py-4 px-4">
                        <span
                          className={`px-3 py-1 rounded-full text-xs font-semibold ${
                            verification.action === 'approved'
                              ? 'bg-emerald-100 text-emerald-700'
                              : 'bg-rose-100 text-rose-700'
                          }`}
                        >
                          {verification.action.charAt(0).toUpperCase() + verification.action.slice(1)}
                        </span>
                      </td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{formatTimestamp(verification.timestamp)}</td>
                      <td className="py-4 px-4 text-gray-600 text-sm">{verification.reason || '-'}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}
        </div>
      </div>

      {/* Suspend/Activate Modal */}
      {showSuspendModal && (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
            <h3 className="text-2xl font-bold text-gray-900 mb-4">
              {editor.status === 'active' ? 'Suspend Editor?' : 'Activate Editor?'}
            </h3>
            <p className="text-gray-600 mb-6">
              {editor.status === 'active'
                ? `Are you sure you want to suspend ${editor.fullName}? They will no longer be able to access the editor dashboard.`
                : `Are you sure you want to activate ${editor.fullName}? They will regain access to the editor dashboard.`}
            </p>
            <div className="flex gap-3">
              <button
                onClick={() => setShowSuspendModal(false)}
                className="flex-1 px-6 py-3 border-2 border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50"
              >
                Cancel
              </button>
              <button
                onClick={handleSuspend}
                className={`flex-1 px-6 py-3 font-semibold rounded-xl text-white ${
                  editor.status === 'active'
                    ? 'bg-gradient-to-r from-amber-500 to-orange-600 hover:shadow-lg'
                    : 'bg-gradient-to-r from-emerald-500 to-green-600 hover:shadow-lg'
                }`}
              >
                {editor.status === 'active' ? 'Suspend' : 'Activate'}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Delete Modal */}
      {showDeleteModal && (
        <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
            <h3 className="text-2xl font-bold text-rose-600 mb-4">Delete Editor?</h3>
            <p className="text-gray-600 mb-6">
              Are you sure you want to permanently delete {editor.fullName}? This action cannot be undone and all their activity history will be preserved for audit purposes.
            </p>
            <div className="flex gap-3">
              <button
                onClick={() => setShowDeleteModal(false)}
                className="flex-1 px-6 py-3 border-2 border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50"
              >
                Cancel
              </button>
              <button
                onClick={handleDelete}
                className="flex-1 px-6 py-3 bg-gradient-to-r from-rose-500 to-red-600 text-white font-semibold rounded-xl hover:shadow-lg"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
      )}
    </DashboardLayout>
  );
}
